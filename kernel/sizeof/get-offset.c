#include <asm/uaccess.h>
#include <linux/cdev.h>
#include <linux/device.h>
#include <linux/errno.h>
#include <linux/file.h>
#include <linux/fs.h>
#include <linux/init.h>
#include <linux/miscdevice.h>
#include <linux/module.h>
#include <linux/msg.h>
#include <linux/slab.h>

struct mycdev {
  int len;
  unsigned char buffer[50];
  struct cdev cdev;
};

#define SIZEOF(_struct) pr_info(#_struct " == 0x%lx", sizeof(_struct))
#define OFFSETOF(_struct, _prop) \
  pr_info(#_struct " + 0x%lx == " #_struct "." #_prop, offsetof(_struct, _prop))

static int __init lkm_example_init(void) {
  SIZEOF(struct msg_msg);
  OFFSETOF(struct task_struct, tasks);
  return 0;
}
static void __exit lkm_example_exit(void) { pr_info("Goodbye, World!\n"); }

module_init(lkm_example_init);
module_exit(lkm_example_exit);
MODULE_LICENSE("GPL");
