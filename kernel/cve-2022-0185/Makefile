all:
	musl-gcc -Wall -static -s exploit.c -o exp

clean:
	rm exp

rootfs:
	cd root && find . -print0 | cpio -o --format=newc --null > ../initramfs.cpio

uncompress-initram:
	gzip -kd initramfs.cpio.gz
	mkdir -p root

local: all uncompress-initram
	rm -rf root/*
	cd root && cpio -idv < ../initramfs.cpio && \
	mv ../exp . && \
	find . -print0 | cpio -o --format=newc --null > ../initramfs.cpio
