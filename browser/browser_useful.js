// Helper functions to convert between float and integer primitives
var buf = new ArrayBuffer(8); // 8 byte array buffer
var f64_buf = new Float64Array(buf);
var u64_buf = new Uint32Array(buf);

/**
  * Float to Integer
  * in: Float (ex: 2.2)
  * out: Unsigned Int 
*/
function ftoi(val) { // typeof(val) = float
    f64_buf[0] = val;
    return BigInt(u64_buf[0]) + (BigInt(u64_buf[1]) << 32n); // Watch for little endianness
}

/**
  * Integer to Float
  * in: Unsigned Int
  * out: Float (ex: 2.2) 
*/
function itof(val) { // typeof(val) = BigInt
    u64_buf[0] = Number(val & 0xffffffffn);
    u64_buf[1] = Number(val >> 32n);
    return f64_buf[0];
}

/**
  * To hex
  * in: Float (ex: 2.2)
  * out: 0xbaddbeef
*/
function ftoh(val) {
  return "0x" + ftoi(val).toString(16)
}
